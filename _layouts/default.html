<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title }} — {{ site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
</head>
<body>
  <a class="skip-link" href="#conteudo">Pular para o conteúdo</a>

  <header class="header">
    <div class="container header-inner">
      <div class="topbar">
        <a class="breadcrumb" href="{{ '/' | relative_url }}">← Início</a>
        <button id="themeToggle" class="theme-toggle" type="button">Alternar tema</button>
      </div>

      <div>
        <h1>{{ page.title }}</h1>
        {% if page.subtitle %}<p class="subtitle">{{ page.subtitle }}</p>{% endif %}
      </div>

      {% if page.show_nav %}
      <nav class="nav" aria-label="Módulos">
        <a href="{{ '/' | relative_url }}#compras" data-module="compras">Compras</a>
        <a href="{{ '/' | relative_url }}#estoque" data-module="estoque">Estoque</a>
        <a href="{{ '/' | relative_url }}#financeiro" data-module="financeiro">Financeiro</a>
        <a href="{{ '/' | relative_url }}#contratos" data-module="contratos">Contratos</a>
      </nav>
      {% endif %}
    </div>
  </header>

  <main id="conteudo" class="container">
    {{ content }}
    <footer class="footer">
      <p>
        © 2026 <strong>KLM Systems</strong>. Todos os direitos reservados.<br>
        Conteúdo interno e confidencial, destinado exclusivamente a pessoas autorizadas.<br>
        É proibida a reprodução, redistribuição, gravação ou compartilhamento sem autorização prévia.
      </p>
    </footer>
  </main>

  <script>
    const html = document.documentElement;
    const btn = document.getElementById("themeToggle");

    function applyTheme(theme){
      if(theme === "light") html.setAttribute("data-theme","light");
      else html.removeAttribute("data-theme");
      localStorage.setItem("theme", theme);
    }

    const saved = localStorage.getItem("theme");
    if(saved) applyTheme(saved);

    btn?.addEventListener("click", () => {
      const isLight = html.getAttribute("data-theme") === "light";
      applyTheme(isLight ? "dark" : "light");
    });
  </script>
</body>
</html>
